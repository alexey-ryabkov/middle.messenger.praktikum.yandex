@use 'sass:map';
@import '../../scss/mixins';

$spinner-sizes: ('small': 14px, 'regular': 24px, 'large': 46px);
    
.spinner {
    font-size: map.get($spinner-sizes, 'regular');;
    position: relative;
    display: inline-block;
    width: 1em;
    height: 1em;

    &__ {
        &blade {
            position: absolute;
            left: .4629em;
            bottom: 0;
            width: .074em;
            height: .2777em;
            border-radius: .5em;
            background-color: transparent;
            transform-origin: center -.2222em;
        }
    }

    &-- {
        &color_ {
            &light {
                .spinner__blade {
                    animation: spinner-fade-light 1s infinite linear;
                    $animation-delay: 0s;
                    $blade-rotation: 0deg;
                
                    @for $i from 1 through 12 {
                        &:nth-child(#{$i}) {
                            animation-delay: $animation-delay;
                            transform: rotate($blade-rotation);
                            $blade-rotation: $blade-rotation + 30;
                            $animation-delay: $animation-delay + .083;
                        }
                    }
                }
            }

            &dark {
                .spinner__blade {
                    animation: spinner-fade-dark 1s infinite linear;
                    $animation-delay: 0s;
                    $blade-rotation: 0deg;
                
                    @for $i from 1 through 12 {
                        &:nth-child(#{$i}) {
                            animation-delay: $animation-delay;
                            transform: rotate($blade-rotation);
                            $blade-rotation: $blade-rotation + 30;
                            $animation-delay: $animation-delay + .083;
                        }
                    }
                }
            }
        }

        @include gen-props('&size_', [font-size], $spinner-sizes);

        &centered {
            @include absolute-center;
        }
    }
}

@keyframes spinner-fade-light {
    0% {
        background-color: white;
    }

    100% {
        background-color: transparent;
    }
}

@keyframes spinner-fade-dark {
    0% {
        background-color: black;
    }

    100% {
        background-color: transparent;
    }
}
